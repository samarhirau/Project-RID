
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Here</title>
    <link rel="stylesheet" href="./css/form.css">
    <link rel="stylesheet" href="./css/responsive.css">

</head>
<body onload="loadPage">
    <div class="headings">
        <h1>Registration</h1>
        <h3>Research Innovation & Discovery</h3>
       </div>
    <div class="container" id="container1" style="display: block;">
        <!-- <h1>Registration</h1>
        <h3>Research Innovation & Discovery</h3> -->
        <div class="img">
        <img src="../assets/images/step-1.png" alt="">
    </div>
        <form  action="/user/register" method="post" class="form">
        <div id="form1">
            <div class="form-group">
                <label>First Name <span style="color: red; font-weight: bold;">*</span></label>
         <input type="text" id="firstName" name="userName" pattern="[A-Za-z]+" required placeholder="Enter Fist Name">
         <span id="firstNameError" style="color: red; display: none;">please enter a valid first name.</span>
           
            </div>
            <div class="form-group">
                <label>Last Name <span style="color: red; font-weight: bold;">*</span></label>
                <input type="text" id="lastName" name="lastName" required placeholder="Enter Last Name">
                <span id="lastNameError" style="color: red; display: none;" >please enter a valid last name.</span>

            </div>
            <div class="form-group">
                <label>Email Address <span style="color: red; font-weight: bold;">*</span></label>
                <input type="email" id="email" name="email" placeholder="youremail@gmail.com" required>
                <span id="emailError" style="color: red; display: none;">Please enter a valid email.</span>
            </div>
            <div class="form-group">
                <label>Create Password <span style="color: red; font-weight: bold;">*</span></label>
                <input type="password" id="password" name="password" placeholder="*********" required  >
                <span id="error-msg" style="color: red; display: none;"> 8 digit password allowed.</span>
            </div>
        </div>
        <button id="nextButton">Next</button>
        <br>
        <div class="anAccount">
        <span class="login-span">Already have an account? <a>Login</a></span>
    </div>
       
    </div>
   
    <div class="container" id="container3" style="display: none;">
       
        <div class="img">
        <img src="../assets/images/step-2.png" alt="">
    </div>
        <div id="form3">
            <div class="form-group">
                <label>Gender <span style="color: red; font-weight: bold;">*</span></label>
                <select id="gender" name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label>Mobile Number <span style="color: red; font-weight: bold;">*</span></label>
                <!-- don't show the error msg ending add the maxlength=10-->
                <input type="tel" id="phone" name="phone" required placeholder="Enter mobile number">
                <span id="error" style="color: red; display: none;">Only 10 digits allowed</span>
            </div>
            <div class="form-group">
                <label>Date of Birth <span style="color: red; font-weight: bold;">*</span></label>
                <input type="date" id="dob" name="dob" required>

            </div>
            <div class="form-group">
                <label for="role" >Role<span style="color: red; font-weight: bold;">*</span></label>
                <input type="text" id="role" name="role" placeholder="Search for a role" autocomplete="off" list="roleList" required>
                <datalist id="roleList">
                <option value="organisation">organisation</option>
                <option value="student">student</option>
                <option value="teacher">teacher</option>
                <!-- <option value="admin">admin</option> -->
                   
                </datalist>
            </div>
        </div>
        <div class="buttons">
            <button id="PreviousBtn" type="button" >Previous</button>
        <button id="sumit-btn" type="submit">Submit</button>
       
    </div>
    <br>
        <div class="anAccount">
            <span class="login-span">Already have an account? <a>Login</a></span>
        </div>
        
        
    </div>
    <div class="container" id="container4" style="display: none;">
        <h1>Registration</h1>
        <h3>Research Innovation & Discovery</h3>
        <img src="../assets/images/step-4.png" alt="">
        <div id="form-last">
            <img src="../assets/images/icon-success.png" alt="">
            <h1>Congratulations, <span id="userName">User</span></h1>
            <span>Successfully Registered in RID. <a href="">Login</a></span>
        </div>

<!--
 footer

-->

       
    </div>
</form>

    <footer>
        <p>Copyright Â©2024, RID | TWF (TWKSAA WELFARE FOUNDATION). All Rights Reserved.</p>
        <div class="links">
        <span><a href="">Home</a> | <a href="">Terms & Conditions</a> | <a href="">Privacy Policy</a> | <a href="">Feedback</a></span>
    </div>
    </footer>


    
    <script>
  

        

        function loadPage() {
            const currentPage = localStorage.getItem('currentPage') || 'container1';
            document.getElementById(currentPage).style.display = 'flex';
        }
    </script>
    <script>
    const nextBtn = document.querySelector('#nextButton');
    const container3 = document.querySelector('#container3');
    nextBtn.addEventListener('click',function(){
        const container1 = document.querySelector('#container1');
        container1.style.display = 'none';
        container3.style.display = 'flex';
        localStorage.setItem('currentPage', 'container3');
    });

    const previousBtn = document.querySelector('#PreviousBtn');
    previousBtn.addEventListener('click',function(){
        const container1 = document.querySelector('#container1');
        const container3 = document.querySelector('#container3');
        container3.style.display = 'none';
        container1.style.display = 'flex';
        localStorage.setItem('currentPage', 'container1');
    });
    </script>
    <script>
        //  document.querySelector('#submitBtn').addEventListener('click', function(event) {
        //     const form = document.querySelector('#form3');
        //     if (form.checkValidity()) {
        //         // Simulate form submission
        //         // You can replace this part with actual form submission logic using fetch or XMLHttpRequest
        //         setTimeout(() => {
        //             document.getElementById('container3').style.display = 'none';
        //             document.getElementById('container4').style.display = 'flex';
        //             localStorage.setItem('currentPage', 'container4');
        //         }, 1000); // Simulating a delay for form submission
        //     } else {
        //         event.preventDefault();
        //         form.reportValidity(); // Display validation messages
        //     }
        // });
    </script>
    <script>
 document.querySelector('#submitBtn').addEventListener('click', async function(event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(document.querySelector('#container4'));
            try {
                const response = await fetch('/user/register', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                if (result.success) {
                    document.getElementById('container3').style.display = 'none';
                    document.getElementById('container4').style.display = 'flex';
                    // localStorage.setItem('currentPage', 'container4');
                } else {
                    // Handle failure (e.g., show an error message)
                    alert(result.message); 
                }
            } catch (error) {
                console.error('Error:', error);
            }
        });
    </script>
    

    <!-- div1 js code validation.-->
   <script>
   
    function validateInput(inputField, regex, errorSpan) {
     if (!regex.test(inputField.value)) {
         errorSpan.style.display = "block";
         inputField.style.border = "2px solid red";
     } else {
         errorSpan.style.display = "none";
         inputField.style.border = "";
     }
 }
 
 const firstNameInput = document.getElementById("firstName");
 const lastNameInput = document.getElementById("lastName");
 const emailInput = document.getElementById("email");
 
 firstNameInput.addEventListener("focus", function() {
     this.style.border = ""; // Reset border on focus
 });
 firstNameInput.addEventListener("blur", function() {
     validateInput(this, /^[A-Za-z]+$/, document.getElementById("firstNameError"));
 });
 firstNameInput.addEventListener("input", function() {
     validateInput(this, /^[A-Za-z]+$/, document.getElementById("firstNameError"));
 });
 
 lastNameInput.addEventListener("focus", function() {
     this.style.border = ""; // Reset border on focus
 });
 lastNameInput.addEventListener("blur", function() {
     validateInput(this, /^[A-Za-z]+$/, document.getElementById("lastNameError"));
 });
 lastNameInput.addEventListener("input", function() {
     validateInput(this, /^[A-Za-z]+$/, document.getElementById("lastNameError"));
 });
 
 emailInput.addEventListener("focus", function() {
     this.style.border = ""; // Reset border on focus
 });
 emailInput.addEventListener("blur", function() {
     validateInput(this, /^[^\s@]+@[^\s@]+\.[^\s@]+$/, document.getElementById("emailError"));
 });
 emailInput.addEventListener("input", function() {
     validateInput(this, /^[^\s@]+@[^\s@]+\.[^\s@]+$/, document.getElementById("emailError"));
 });
 
 function validateForm() {
     // Overall validation before form submission
     let isValid = true;
 
     // Check if any error spans are visible
     document.querySelectorAll("span").forEach(span => {
         if (span.style.display === "block") {
             isValid = false;
         }
     });
 
     return isValid; // Form will only submit if all validations pass
 }
 </script>
 <!-- password validation only. -->

 <script>
    const passwordInput = document.getElementById('password');
    const errorMsg = document.getElementById('error-msg');

    // Hide error message on focus
    passwordInput.addEventListener('focus', function() {
        errorMsg.style.display = 'none';
    });

    // Validate password length on input
    passwordInput.addEventListener('input', function() {
        if (passwordInput.value.length > 8) {
            errorMsg.style.display = 'block'; // Show error message
            passwordInput.value = passwordInput.value.slice(0, 8); // Limit to 8 characters
        } else {
            errorMsg.style.display = 'none'; // Hide error message if valid
        }
    });
</script>

<!-- Number validation  -->

<script>
    const inputField = document.getElementById('phone');
    const errorMessage = document.getElementById('error');

    inputField.addEventListener('input', function() {
        // Remove any non-digit characters
        inputField.value = inputField.value.replace(/\D/g, '');
        
        // Show error if more than 10 digits
        if (inputField.value.length > 10) {
            errorMessage.style.display = 'block';
        } else {
            errorMessage.style.display = 'none';
        }
    });

    inputField.addEventListener('focus', function() {
        errorMessage.style.display = 'none'; // Hide error on focus
    });
</script>
 
</body>
</html>
