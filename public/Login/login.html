<!DOCTYPE html>
<html>
  <head>
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="login.css" />
  </head>
  <body>
    <div class="container">
      <div class="left-content">
        <h1>Login</h1>
        <h2>Research Innovation & Discovery</h2>
        <div class="inner-div">
          <form id="loginForm" action="/auth/login" method="POST">
            <label for="email">Enter Email Address:</label>
            <input
              type="text"
              id="email"
              name="email"
              placeholder="Enter your email address"
            />

            <label for="password">Enter Password:</label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="Enter your password"
            />
            <!-- <label for="role">Role <span style="color: red; font-weight: bold;">*</span></label>
            <input type="text" id="role" name="role" placeholder="Search for a role" autocomplete="off" list="roleList" required>
            <datalist id="roleList">
                <option value="organisation">organisation</option>
            <option value="student">student</option>
            <option value="teacher">teacher</option>
               
            </datalist> -->
            <button type="button"  id="forgotPass">Forget Password?</button>
            <button  type="submit">Login</button>
            
            
             
          

          </form>

          <p>
            By continuing login process, you agree to RID's
            <a href="#">Conditions </a> of Use and
            <a href="#">Privacy Notice</a>.
          </p>
        </div>
        <div class="footer">
          <p class="text">
            Copyright Â©<span id="currentYear"></span>, RID | TWF (TWKSAA WELFARE FOUNDATION). All Rights
            Reserved.
          </p>
          <div class="links">
            <a href="#">About</a> | <a href="#">Terms & Conditions</a> |
            <a href="#">Privacy Policy</a> | <a href="#">Feedback</a>
          </div>
        </div>
      </div>
      <div class="right-content">
        <div class="img">
          <img src="./assets/images/loginMainImg.png" alt="LoginMainIMG" />
        </div>
        <img id="onLogo" src="./assets/images/imageLogo.png" alt="">
      </div>
    </div>

    <div class="forgot-password-container" style="display: none;">
      <h2 class="forget-title">Forgot Password</h2>
      <form id="forgotPasswordForm">
        <div class="form-group">
          <label class="email-label" for="email">Enter your email address</label>
          <input class="email-in" type="email" id="email" name="email" required placeholder="Enter your email">
        </div>
        <button  type="submit">Submit</button>
      </form>
      <div id="message"></div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
  var currentYear = new Date().getFullYear();
  document.getElementById('currentYear').textContent = currentYear;
});

    </script>
  <script>
      const forgotPass = document.getElementById('forgotPass');
      forgotPass.addEventListener('click', () => {
    window.location.href = '/forgot-password';
  });
  </script>

    <script>
    document.getElementById('forgetBtn').addEventListener('submit', async (event) => {
      event.preventDefault();
  
      const email = document.getElementById('email').value;
  
      try {
          const response = await fetch('/api/auth/forgot-password', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email })
          });
          const result = await response.json();
  
          if (response.ok) {
              alert(result.message);
          } else {
              alert(result.message);
          }
      } catch (error) {
          alert('Error sending reset email.');
      }
  });
  </script>
  <script src="../js/showToast.js"></script>
  </body>
</html>
